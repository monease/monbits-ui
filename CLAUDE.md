# CLAUDE.md - @monease/monbits-ui

## Package Overview

| | |
|---|---|
| **Package** | `@monease/monbits-ui` |
| **Registry** | GitHub Packages (public) |
| **Version** | 0.2.1 |

React UI component library following shadcn/ui patterns. Built on Radix UI primitives, Tailwind CSS v4, and class-variance-authority.

## Project Structure

```
src/
├── components/
│   ├── ui/           # 32 UI primitives (button, card, dialog, etc.)
│   ├── composites/   # 8 composed components (loader, status-badge, etc.)
│   └── index.ts      # Component exports
├── hooks/            # 4 React hooks
├── lib/              # Utilities (cn, toast helpers)
├── styles/
│   └── globals.css   # Tailwind v4 theme
└── index.ts          # Package entry point
```

## Commands

```bash
npm install    # Install dependencies
npm run build  # Build to /dist
npm run dev    # Watch mode
npm publish    # Publish to GitHub Packages
```

## Dependencies

### Bundled (included in package)

- All `@radix-ui/*` packages
- `class-variance-authority`, `clsx`, `tailwind-merge`
- `input-otp`, `react-day-picker`, `sonner`, `vaul`

### Peer Dependencies (consumer installs)

- `react`, `react-dom`
- `lucide-react`
- `next-themes`
- `react-hook-form`
- `zod`

## Component Pattern

```tsx
import { cva, type VariantProps } from "class-variance-authority";
import { cn } from "../../lib/utils";

const buttonVariants = cva("base-classes", {
  variants: {
    variant: { default: "...", destructive: "..." },
    size: { sm: "...", default: "...", lg: "..." }
  },
  defaultVariants: { variant: "default", size: "default" }
});

function Button({ className, variant, size, ...props }) {
  return <button className={cn(buttonVariants({ variant, size, className }))} {...props} />;
}

export { Button, buttonVariants };
```

**Key patterns:**
- Export variant functions for reuse
- Use `cn()` for class merging
- Support `asChild` prop via Radix Slot
- Export TypeScript types

## Build Configuration

**vite.config.ts** - Library mode

| Output | Format |
|--------|--------|
| `dist/index.js` | ESM |
| `dist/index.cjs` | CommonJS |
| `dist/*.d.ts` | TypeScript declarations |

**Externals** (not bundled):
- `react`, `react-dom`, `react/jsx-runtime`
- `lucide-react`, `next-themes`
- `react-hook-form`, `zod`

## Consumer Integration

### 1. Add registry

```bash
echo "@monease:registry=https://npm.pkg.github.com" > .npmrc
```

### 2. Install

```bash
npm install @monease/monbits-ui
npm install react react-dom lucide-react next-themes react-hook-form zod
```

### 3. Configure Tailwind v4

```css
@import "tailwindcss";
@source "../node_modules/@monease/monbits-ui/src";
```

Path is relative to CSS file. Use `src` not `dist` (Tailwind needs source files to scan classes).

### 4. Use components

```tsx
import { Button, Card, cn } from "@monease/monbits-ui";
```

## Styling

### CSS Variables

Theme uses OKLCH color space. Override in consumer's CSS:

```css
:root {
  --primary: oklch(0.6 0.25 260);
  --radius: 0.5rem;
}
```

### Dark Mode

Via `.dark` class with `@custom-variant dark (&:is(.dark *))`.

## Adding Components

1. Create `/src/components/ui/{name}.tsx`
2. Export from `/src/components/ui/index.ts`
3. Run `npm run build`
4. Bump version in `package.json`
5. Run `npm publish`

## Important

- **Don't edit `/dist/`** - generated by build
- **Don't remove CSS variables** - consumers may depend on them
- **Don't rename exports** - breaking change
- **Keep Radix accessibility** - don't override ARIA attributes
